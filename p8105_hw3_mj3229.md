Homework 3
================

Mahitha Jangeti 10/13/25

``` r
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.4     ✔ readr     2.1.5
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.1
    ## ✔ ggplot2   3.5.2     ✔ tibble    3.3.0
    ## ✔ lubridate 1.9.4     ✔ tidyr     1.3.1
    ## ✔ purrr     1.1.0     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

## Problem 1

**Loading dataset and creating plot**

``` r
library(p8105.datasets)
data("instacart")

instacart_df = instacart
```

``` r
instacart_df %>% 
  group_by(aisle) %>% 
  summarize(n_obs = n()) %>% 
  mutate(aisle_rank = min_rank(desc(n_obs))) %>% 
  arrange(aisle_rank) %>% 
  filter(n_obs > 10000) %>% 
  ggplot(aes(x = aisle, y = n_obs)) +
  geom_col() +
  coord_flip() +
  labs(
    title = "Number of Items Ordered in each Aisle",
    x = "Aisle Name",
    y = "Number of Items Ordered"
  )
```

![](p8105_hw3_mj3229_files/figure-gfm/unnamed-chunk-2-1.png)<!-- -->

**Creating Tables Based on Aisle**

``` r
instacart_df %>% 
  filter(aisle %in% c("baking ingredients")) %>% 
  group_by(aisle, product_name) %>% 
  summarize(n_baking = n()) %>% 
  mutate(baking_rank = min_rank(desc(n_baking))) %>% 
  arrange(baking_rank) %>% 
  filter(baking_rank <= 3)
```

    ## `summarise()` has grouped output by 'aisle'. You can override using the
    ## `.groups` argument.

    ## # A tibble: 3 × 4
    ## # Groups:   aisle [1]
    ##   aisle              product_name      n_baking baking_rank
    ##   <chr>              <chr>                <int>       <int>
    ## 1 baking ingredients Light Brown Sugar      499           1
    ## 2 baking ingredients Pure Baking Soda       387           2
    ## 3 baking ingredients Cane Sugar             336           3

``` r
instacart_df %>% 
  filter(aisle %in% c("dog food care")) %>% 
  group_by(aisle, product_name) %>% 
  summarize(n_dog = n()) %>% 
  mutate(dog_rank = min_rank(desc(n_dog))) %>% 
  arrange(dog_rank) %>% 
  filter(dog_rank <= 3)
```

    ## `summarise()` has grouped output by 'aisle'. You can override using the
    ## `.groups` argument.

    ## # A tibble: 3 × 4
    ## # Groups:   aisle [1]
    ##   aisle         product_name                                  n_dog dog_rank
    ##   <chr>         <chr>                                         <int>    <int>
    ## 1 dog food care Snack Sticks Chicken & Rice Recipe Dog Treats    30        1
    ## 2 dog food care Organix Chicken & Brown Rice Recipe              28        2
    ## 3 dog food care Small Dog Biscuits                               26        3

``` r
instacart_df %>% 
  filter(aisle %in% c("packaged vegetables fruits")) %>% 
  group_by(aisle, product_name) %>% 
  summarize(n_packaged = n()) %>% 
  mutate(packaged_rank = min_rank(desc(n_packaged))) %>% 
  arrange(packaged_rank) %>% 
  filter(packaged_rank <= 3)
```

    ## `summarise()` has grouped output by 'aisle'. You can override using the
    ## `.groups` argument.

    ## # A tibble: 3 × 4
    ## # Groups:   aisle [1]
    ##   aisle                      product_name         n_packaged packaged_rank
    ##   <chr>                      <chr>                     <int>         <int>
    ## 1 packaged vegetables fruits Organic Baby Spinach       9784             1
    ## 2 packaged vegetables fruits Organic Raspberries        5546             2
    ## 3 packaged vegetables fruits Organic Blueberries        4966             3

**Top three products in baking ingredients are light brown sugar, pure
baking soda, and cane sugar. Top three products in dog food care are
snack sticks chicken & rice recipe dog treats, organix chicken & brown
rice recipe, and small dog biscuits. Lastly, the top three products in
packaged vegetables fruits are organic baby spinach, organic
raspberries, and organic blueberries.**

**Creating Table for Pink Lady Apples and Coffee Ice Cream**

``` r
instacart_df %>% 
  filter(product_name %in% c("Pink Lady Apples", "Coffee Ice Cream")) %>% 
   mutate(
     order_dow = recode(order_dow,
                  `0` = "Monday",
                  `1` = "Tuesday",
                  `2` = "Wednesday",
                  `3` = "Thursday",
                  `4` = "Friday",
                  `5` = "Saturday",
                  `6` = "Sunday")) %>% 
  group_by(product_name, order_dow) %>% 
  rename("Product Name" = product_name) %>% 
  summarize(mean_hour = mean(order_hour_of_day, na.rm = TRUE)) %>% 
  pivot_wider(
    names_from = order_dow,
    values_from = mean_hour
  ) %>% 
  knitr::kable(digits = 1)
```

    ## `summarise()` has grouped output by 'Product Name'. You can override using the
    ## `.groups` argument.

| Product Name     | Friday | Monday | Saturday | Sunday | Thursday | Tuesday | Wednesday |
|:-----------------|-------:|-------:|---------:|-------:|---------:|--------:|----------:|
| Coffee Ice Cream |   15.2 |   13.8 |     12.3 |   13.8 |     15.3 |    14.3 |      15.4 |
| Pink Lady Apples |   11.6 |   13.4 |     12.8 |   11.9 |     14.2 |    11.4 |      11.7 |

\*\*\*\*There are 134 aisles with most items order from the fresh
vegetables, fresh fruits, and packed vegetables fruits aisles. \*\*
